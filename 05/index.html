<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/><link rel="index" title="Índice" href="../genindex.html" /><link rel="search" title="Búsqueda" href="../search.html" />

    <meta name="generator" content="sphinx-3.3.1, furo 2020.11.27.beta19"/>
        <title>Creando un paquete de R - SIQ025</title>
      <link rel="stylesheet" href="../_static/styles/furo.css?digest=4d4607a28768ea509d1701e6fba1bca6c595da19">
    <link rel="stylesheet" href="../_static/pygments.css">
    <link media="(prefers-color-scheme: dark)" rel="stylesheet" href="../_static/pygments_dark.css">
    


<style>
  :root {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }

  /* For allowing end-user-specific overrides */
  .override-light {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  .override-dark {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
</style><link id="pygments_dark_css" media="(prefers-color-scheme: dark)" rel="stylesheet" type="text/css" href="../_static/pygments_dark.css" />
    <link rel="stylesheet" href="../_static/styles/furo-extensions.css?digest=26485485040e7aaf717c13fd0188a5ad2c2deb60">
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script defer src="../_static/jquery.js"></script>
    <script defer src="../_static/underscore.js"></script>
    <script defer src="../_static/doctools.js"></script>
    <script defer src="../_static/language_data.js"></script>
    <script defer src="../_static/translations.js"></script>
    <script defer src="../_static/scripts/main.js?digest=1e13a99a5b478789393b59468e7cadf60869ce3f"></script></head>
  <body dir="">
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke-width="1.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z"/>
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>


<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">SIQ025</div></a>
    </div>
    <div class="header-right">
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand centered" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../_static/marca-uji-color.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">SIQ025</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html">
  <input class="sidebar-search" placeholder="Search" name="q">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form><div class="sidebar-scroll"><div class="sidebar-tree">
  
</div>
</div>
      </div>
      
    </div>
  </aside>
  <main class="main">
    <div class="content">
      <article role="main">
        <label class="toc-overlay-icon toc-content-icon" for="__toc">
          <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
        </label>
        <div class="section" id="creando-un-paquete-de-r">
<h1>Creando un paquete de R<a class="headerlink" href="#creando-un-paquete-de-r" title="Enlazar permanentemente con este título">¶</a></h1>
<div class="admonition-objetivos admonition">
<p class="admonition-title">Objetivos</p>
<ul class="simple">
<li><p>Aprender qué es un paquete de R.</p></li>
<li><p>Conocer las principales partes de un paquete.</p></li>
<li><p>Crear un paquete de R usando RStudio.</p></li>
</ul>
</div>
<div class="admonition-referencias admonition">
<p class="admonition-title">Referencias</p>
<p><a class="reference external" href="https://r-pkgs.org/preface.html">R Packages (Hadley Wickham, Jennifer Bryan)</a></p>
</div>
<div class="section" id="que-es-un-paquete-de-r">
<h2>¿Qué es un paquete de R?<a class="headerlink" href="#que-es-un-paquete-de-r" title="Enlazar permanentemente con este título">¶</a></h2>
<p>En R, la unidad fundamental de código que se puede compartir es el paquete.
Un paquete puede agrupar código, datos, documentación y tests, y, además, es
fácil de compartir con otros.</p>
<p>Esta última característica es la que ha situado a R entre los lenguajes de
programación más usados en el mundo. Como actualmente existen más de 14000
paquetes en el <a class="reference external" href="https://cran.r-project.org/">CRAN</a>, la probabilidad de
que alguien haya resuelto nuestra necesidad (o problema) es muy alto. Por lo
tanto, en lugar de implementar nosotros las solución, podemos beneficiarnos del
trabajo de otro descargandonos su paquete.</p>
</div>
<div class="section" id="estructura-de-un-paquete">
<h2>Estructura de un paquete<a class="headerlink" href="#estructura-de-un-paquete" title="Enlazar permanentemente con este título">¶</a></h2>
<p>La estructura más básica de un paquete de R es la siguiente:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/
├── DESCRIPTION
├── NAMESPACE
└── R/
    └── ...
</pre></div>
</div>
<div class="section" id="metadatos">
<h3>Metadatos<a class="headerlink" href="#metadatos" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El fichero <code class="docutils literal notranslate"><span class="pre">DESCRIPTION</span></code> contiene todos los metadatos que describen el
paquete:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Package: project
Title: What the Package Does (One Line, Title Case)
Version: 0.0.0.9000
Authors@R:
    person(given = "First",
           family = "Last",
           role = c("aut", "cre"),
           email = "first.last@example.com",
           comment = c(ORCID = "YOUR-ORCID-ID"))
Description: What the package does (one paragraph).
License: `use_mit_license()`, `use_gpl3_license()` or friends to
    pick a license
Encoding: UTF-8
LazyData: true
Roxygen: list(markdown = TRUE)
RoxygenNote: 7.1.1
</pre></div>
</div>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">Package</span></code>: indica el nombre del paquete.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Title</span></code>: contiene la descripción en una línea del paquete. Debe ser texto
sin formato.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Version</span></code>: determina la versión actual del paquete.</p>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<p>Información sobre como determinar el número de versión:
<a class="reference external" href="https://r-pkgs.org/release.html#release-version">https://r-pkgs.org/release.html#release-version</a>.</p>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">Authors</span></code>: muestra información sobre los autores del paquete.</p>
<ul class="simple">
<li><p>El nombre está especificado por los parametros <code class="docutils literal notranslate"><span class="pre">given</span></code> (nombre) y
<code class="docutils literal notranslate"><span class="pre">family</span></code> (apellidos).</p></li>
<li><p>La dirección de correo electrónico se encuentra en <code class="docutils literal notranslate"><span class="pre">email</span></code>.</p></li>
<li><p>El rol de cada persona en el paquete (autor o creador) está descrito por el
campo <code class="docutils literal notranslate"><span class="pre">rol</span></code>.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">Description</span></code>: contiene una descripción del paquete más detallada que el
título. Puede contener varias oraciones, pero está limitada a un párrafo.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">License</span></code>: indica la licencia que usa el paquete. En software de código
abierto, una de las licencias más permisivas es la <a class="reference external" href="https://opensource.org/licenses/MIT">licencia MIT</a>.</p></li>
</ul>
</div>
<div class="section" id="ficheros-de-r">
<h3>Ficheros de R<a class="headerlink" href="#ficheros-de-r" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El directorio <code class="docutils literal notranslate"><span class="pre">R/</span></code>, tal y como su propio nombre indica, contiene todo el
código R que necesita el paquete.</p>
<p>Así, todas las funciones usadas en el paquete van a estar implementadas
en ficheros incluidos en esta carpeta. En concreto, estas funciones de R
deben estar implementadas en scripts de R, es decir, en ficheros con la
extensión <code class="docutils literal notranslate"><span class="pre">.R</span></code>.</p>
</div>
<div class="section" id="espacio-de-nombres">
<h3>Espacio de nombres<a class="headerlink" href="#espacio-de-nombres" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Finalmente, el fichero <code class="docutils literal notranslate"><span class="pre">NAMESPACE</span></code> contiene las funciones que los usuarios
externos del paquete van a poder usar cuando lo importen desde R.</p>
<p>Este fichero se genera de forma automática usando el paquete <a class="reference external" href="https://cran.r-project.org/web/packages/roxygen2/vignettes/roxygen2.html">roxygen2</a>
(lo veremos en profundidad en la <a class="reference external" href="../03/index.html">lección 3</a>).</p>
</div>
</div>
<div class="section" id="practica">
<h2>Práctica<a class="headerlink" href="#practica" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Antes de pasar a la creación de nuestro paquete, es recomendable instalar los
paquete <a class="reference external" href="https://usethis.r-lib.org">usethis</a> y <a class="reference external" href="https://www.r-project.org/nosvn/pandoc/devtools.html">devtools</a>, ya que nos
van a facilitar todo el desarrollo. Estos paquetes se pueden instalar ejecutando
desde la consola de R los siguientes comandos:</p>
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="nf">install.packages</span><span class="p">(</span><span class="s">"usethis"</span><span class="p">)</span>
<span class="nf">install.packages</span><span class="p">(</span><span class="s">"devtools"</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="creacion-del-paquete">
<h3>Creación del paquete<a class="headerlink" href="#creacion-del-paquete" title="Enlazar permanentemente con este título">¶</a></h3>
<p>En primer lugar abrimos RStudio y en la consola de R ejecutamos el siguiente
comando:</p>
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="n">usethis</span><span class="o">::</span><span class="nf">create_package</span><span class="p">(</span><span class="s">"~/SIQ025"</span><span class="p">)</span>
</pre></div>
</div>
<p>Al ejecutar este comando se nos abrirá otra pantalla de RStudio en el
directorio <code class="docutils literal notranslate"><span class="pre">~/SIQ025</span></code> de nuestro ordenador. Como podemos ver, en este
directorio se ha creado de forma automática la estructura básica del paquete
(vista anteriormente).</p>
<p>Ahora, abrimos el fichero <code class="docutils literal notranslate"><span class="pre">DESCRITION</span></code>, lo rellenamos con los datos
de nuestro paquete y lo guardamos.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Inidcar que se puede copiar este ejemplo o proponer otro.</p>
</div>
<p>En mi caso, el fichero quedaría de la siguiente forma:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Package: SIQ025
Title: Software de modelización de sistemas industriales
Version: 0.0.0.9000
Authors@R:
    person(given = "Aleix",
           family = "Alcacer",
           role = c("cre"),
           email = "aalcacer@uji.com")
Description: SIQ025 es un paquete de R creado en la asignatura de
    modelización de sistemas industriales. Esta asignatura está incluida
    dentro del máster en Matemática Computacional de la UJI.
License: use_mit_license()
Encoding: UTF-8
LazyData: true
Roxygen: list(markdown = TRUE)
RoxygenNote: 7.1.1
</pre></div>
</div>
<p>Una vez completado el fichero <code class="docutils literal notranslate"><span class="pre">DESCRIPTION</span></code> pasamos a crear las funciones
del paquete. Por ahora, solo implementaremos dos funciones: una que calcule la
suma dos números y otra que calcule la diferencia.</p>
<p>Para ello, crearemos dentro del directorio <code class="docutils literal notranslate"><span class="pre">R/</span></code> dos ficheros llamados
<code class="docutils literal notranslate"><span class="pre">suma.R</span></code> y <code class="docutils literal notranslate"><span class="pre">resta.R</span></code>. En el primero de ellos, insertaremos el siguiente
código:</p>
<div class="highlight-R notranslate"><div class="table-wrapper"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">suma</span> <span class="o">&lt;-</span> <span class="nf">function</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span>
  <span class="nf">return</span><span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<p>y en el otro, insertaremos:</p>
<div class="highlight-R notranslate"><div class="table-wrapper"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">resta</span> <span class="o">&lt;-</span> <span class="nf">function</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span>
  <span class="nf">return</span><span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="n">b</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<p>En este momento, ya hemos implementado nuestro pirmer paquete de R. La
estructura que tenemos ahora tiene que ser:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/
├── DESCRIPTION
├── NAMESPACE
└── R/
    ├── suma.R
    └── resta.R
</pre></div>
</div>
<p>Finalmente, para poder usar el paquete de R, tenemos que compilar el paquete
e instalarlo. Para ello, tenemos que ejecutar los siguientes comandos desde
la consola de R:</p>
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="n">devtools</span><span class="o">::</span><span class="nf">build</span><span class="p">()</span>    <span class="c1"># Compila el paquete</span>
<span class="n">devtools</span><span class="o">::</span><span class="nf">install</span><span class="p">()</span>  <span class="c1"># Instala el paquete</span>
<span class="nf">.rs.restartR</span><span class="p">()</span>       <span class="c1"># Reinicia la sessión de R</span>
</pre></div>
</div>
<p>Hecho esto, ya podemos usar nuestro paquete de R desde RStudio:</p>
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">SIQ025</span><span class="o">:::</span><span class="nf">suma</span><span class="p">(</span><span class="m">5</span><span class="p">,</span> <span class="m">6</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">11</span>
<span class="o">&gt;</span> <span class="n">SIQ025</span><span class="o">:::</span><span class="nf">resta</span><span class="p">(</span><span class="m">7</span><span class="p">,</span> <span class="m">11</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">-4</span>
</pre></div>
</div>
</div>
</div>
</div>

      </article>
      <footer>
        
        <div class="related-pages">
          
          
        </div>

        <div class="related-information">
              Copyright &#169; 2020, Aleix Alcacer Sales
            |
            Built with <a href="https://www.sphinx-doc.org/">Sphinx</a>
              and
              <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
              <a href="https://github.com/pradyunsg/furo">Furo theme</a>.
            |
            <a class="muted-link" href="../_sources/05/index.rst.txt"
               rel="nofollow">
              Mostrar el código
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contenidos
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Creando un paquete de R</a><ul>
<li><a class="reference internal" href="#que-es-un-paquete-de-r">¿Qué es un paquete de R?</a></li>
<li><a class="reference internal" href="#estructura-de-un-paquete">Estructura de un paquete</a><ul>
<li><a class="reference internal" href="#metadatos">Metadatos</a></li>
<li><a class="reference internal" href="#ficheros-de-r">Ficheros de R</a></li>
<li><a class="reference internal" href="#espacio-de-nombres">Espacio de nombres</a></li>
</ul>
</li>
<li><a class="reference internal" href="#practica">Práctica</a><ul>
<li><a class="reference internal" href="#creacion-del-paquete">Creación del paquete</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </main>
</div>
  </body>
</html>